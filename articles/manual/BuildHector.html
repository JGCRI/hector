<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • hector</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="hector">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">hector</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/manual/index.html">Manual</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/intro-to-hector.html">A tour of the Hector R interface</a>
    </li>
    <li>
      <a href="../../articles/hector_apply.html">Example: Using Hector to solve for an emissions pathway</a>
    </li>
    <li>
      <a href="../../articles/multiple-biomes.html">Example: Running Hector with multiple biomes</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JGCRI/hector">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="BuildHector_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip></h1>
            
      
      
      <div class="hidden name"><code>BuildHector.Rmd</code></div>

    </div>

    
    
<div id="installing-and-building-hector" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-and-building-hector" class="anchor"></a>Installing and building Hector</h1>
<p>There are lots of ways to use Hector, as a stand alone executable, through the UI, and as an R package. Here we provide installation and building instructions for the R Hector package and the executable.</p>
</div>
<div id="r-hector" class="section level1">
<h1 class="hasAnchor">
<a href="#r-hector" class="anchor"></a>R Hector</h1>
<p>To install R, follow the <a href="https://cloud.r-project.org/">official instructions</a> for your platform.</p>
<p>To install the version associated with the current <code>master</code> git branch on GitHub, use the <code>devtools::install_github</code> function. This will automatically install all of Hector’s dependencies as well. (Note that because this requires compiling from source, you will need to have a C compiler installed and configured.</p>
<p>On <strong>Windows</strong>, you will also need to install <a href="https://cloud.r-project.org/bin/windows/Rtools/">Rtools</a>. On <strong>MacOS</strong> and <strong>Linux</strong>, the required tools should be included as part of a standard R installation.)</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># If the `devtools` isn't installed, first run:</span>
<span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jgcri/hector"</span><span class="op">)</span>

<span class="co"># You can also install from specific git tags...</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jgcri/hector@2.2.2"</span><span class="op">)</span>
<span class="co"># ...branches...</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jgcri/hector@krd-perscribe_co2Con"</span><span class="op">)</span>
<span class="co"># ...or commit hashes.</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"jgcri/hector@16c480a"</span><span class="op">)</span></code></pre></div>
<p>Finally, to install from a local copy of the source code, you can use the following code:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="st">"/path/to/hector"</span><span class="op">)</span>
<span class="co"># For the current directory, use `"."` or run the function with no arguments.</span></code></pre></div>
<p>…or, if you are using the <a href="https://www.rstudio.com/products/rstudio/">RStudio IDE</a>, use the “Install and Restart”, “Clean and Rebuild”, and similar tools in the “Build” tab.</p>
<p>Although very common and broadly useful, the <code>devtools</code> package has many R package dependencies, including some with system dependencies. If you do not want to install <code>devtools</code>, you can also install from a local copy by using the base-R <code>install.packages</code> function as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"/path/to/hector"</span>, repos <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
<p>…or by running the following shell command:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1"></a><span class="ex">R</span> CMD INSTALL /path/to/hector</span></code></pre></div>
<p>However, note that neither of these commands will automatically install Hector’s dependencies, so you will have to install them manually. Hector’s mandatory dependencies are listed in the <code>DESCRIPTION</code> file under <code>Imports</code>, and are currently as follows:</p>
<ul>
<li>
<a href="http://www.rcpp.org/"><code>Rcpp</code></a> – Facilitates integration of C++ code into R packages</li>
<li>
<a href="https://cran.r-project.org/web/packages/BH/index.html"><code>BH</code></a> – Boost C++ header files</li>
</ul>
</div>
<div id="standalone-executable" class="section level1">
<h1 class="hasAnchor">
<a href="#standalone-executable" class="anchor"></a>Standalone Executable</h1>
<p>Hector can also be compiled as a standalone executable. Unlike the R package, this method of installation does not automatically pull in dependencies, so you will have to install them manually. Fortunately, Hector’s only external dependency–Boost–is freely available under a GPL license.</p>
<p><strong>Boost</strong> is a free, peer-reviewed portable C++ source library, available at <a href="http://www.boost.org/" class="uri">http://www.boost.org/</a>. Hector primarily uses Boost “header-only” libraries, which do not need to be compiled independently and only need to be extracted and included with the Hector source. However, Hector currently <em>does</em> depend on two Boost libraries–<code>system</code> and <code>filesystem</code>–that require compilation.</p>
<div id="command-line-linux-mac-osx" class="section level2">
<h2 class="hasAnchor">
<a href="#command-line-linux-mac-osx" class="anchor"></a>Command Line (Linux &amp; Mac OSX)</h2>
<p>The Hector makefiles look for Boost libraries and headers in certain default locations, but those defaults can be overridden by setting the following environment variables:</p>
<ul>
<li><p><code>BOOSTROOT</code> (default <code>$(HOME)/src/boost_$(BOOSTVERSION)</code>). This variable should contain the full name of the directory created when you unpacked Boost. If you unpacked Boost in <code>$(HOME)/src</code>, then all you need to do is set the <code>BOOSTVERSION</code> variable (<em>q.v.</em> below) and leave this variable at its default value. If you unpacked Boost somewhere else (if you used <a href="https://brew.sh/">Homebrew</a> to install Boost), or if you changed the name of the directory that was created when you unpacked it, then you will need to set this variable explicitly.</p></li>
<li><p><code>BOOSTVERSION</code> (default: <code>1_52_0</code>). This variable should contain the version number of the version of Boost that you installed. The version number will appear in the name of the tar file you downloaded. The <code>BOOSTVERSION</code> variable is used in the default value of <code>BOOSTROOT</code> to determine the default installation directory. If you override the default value of <code>BOOSTROOT</code> you can ignore this variable.</p></li>
</ul>
<p><strong>Shared Library Search Path</strong></p>
<p>Compiled Boost libraries used by Hector will be compiled into shared libraries that must be loaded at run time. It is best if these libraries are in directories that are part of your system’s shared library search path. On many systems <code>/usr/local</code> is already in that path. If you install the libraries somewhere else, you may need to add the installation directories to the list given in <code>/etc/ld.so.conf</code>. Whether or not you install the GSL libraries in the default location, when you compile and install them you may need to refresh the library cache by running <code>ldconfig</code> (which generally requires root privilege), or by rebooting your system (which does not).</p>
<p>If you are unable to add your library installation directory to the library search path, you will need to add the installation directory to the environment variable <code>LD_LIBRARY_PATH</code>. Try not to use this approach if you can help it because it can cause some conflicts with other software on your system. Instead, ask your system administrator if <code>ldconfig</code> is right for you.</p>
<div id="build-run-hector" class="section level3">
<h3 class="hasAnchor">
<a href="#build-run-hector" class="anchor"></a>Build &amp; Run Hector</h3>
<p>Once the necessary libraries are installed, change to the top-level Hector directory and type <code>make hector</code>. The hector executable will be built in the <code>source/</code> subdirectory. If you ever need to rebuild, you can type <code>make clean</code> to clear away the executable and all of the intermediate files.</p>
<p>There are two additional environment variables that you can use to fine-tune the build process. The <code>CXXEXTRA</code> variable is passed to the C++ compiler. You can use this variable to pass extra options to the compiler without changing the Makefile. In particular, specifying optimization options in <code>CXXEXTRA</code> such as -O or -O0 will override the default value of -O3.</p>
<p>The <code>CXXPROF</code> variable is passed both to the compiler and the linker. It is intended to turn on performance profiling, which must be specified at both the compile and link stages of the build, so it generally should be either unset (for normal operation) or set to -pg (for profiling). Profiling slows the code down dramatically, so if you use it, be sure to unset <code>CXXPROF</code>, clean the build directories with <code>make clean</code>, and rebuild when you are ready to go back to production runs.</p>
<p>Run Hector from the terminal with the command line.</p>
<pre><code>./src/hector ./inst/input/name-of-ini.ini</code></pre>
</div>
</div>
<div id="xcode-mac-osx" class="section level2">
<h2 class="hasAnchor">
<a href="#xcode-mac-osx" class="anchor"></a>Xcode (Mac OSX)</h2>
<p>These directions assume a basic familiarity with Xcode and Mac OS X software installation.</p>
<ul>
<li>Install <a href="https://developer.apple.com/xcode/downloads/">Xcode</a> if necessary. Hector has been built and tested with Mac OS &gt;= 10.8.5. The project files are for Xcode 11.3.1.</li>
<li>Download and install Boost, following instructions above.</li>
<li>Download the <a href="https://github.com/JGCRI/hector/archive/master.zip">Hector zip file</a> or check out the repository using Git.</li>
<li>From Xcode, open the project file in <code>project_files/Xcode/hector.cxodeproj</code>.</li>
<li>Build the project. See below if you encounter errors.</li>
<li>Change the current Scheme settings (Scheme-&gt;Edit Scheme) and add a command-line argument (<em>Arguments</em> tab, e.g. “input/hector_rcp45.ini”).</li>
<li>Run!</li>
</ul>
<p>Xcode Build Settings to check if you encounter build errors, they should match the version installed on your machine:</p>
<ul>
<li>
<em>Architectures-Base SDK</em>: OS X 10.8 [or OS X version on machine]</li>
<li>
<em>Build Options-Compiler for C/C++/Objective-C</em>: Default compiler (Apple LLVM 5.1)</li>
<li>
<em>Search Paths-Header Search Paths</em>: “/usr/local/include /usr/local/lib/boost_1_52_0/” [or other header directories, this is important for homebrew users]</li>
<li>
<em>Search Paths-Library Search Paths</em>: “/usr/local/lib/” [or other library directories]</li>
<li>
<em>LLVM-Language-C++-C++ Standard Library</em>: libc++ (LLVM C++ standard library with C++11 support)</li>
<li>
<em>Linking-Other Linker Flags</em>: “-lgsl -lgslcblas -lm”</li>
<li>
<em>User-Defined</em>: “GCC_MODEL_TUNING” defined as “G5”</li>
</ul>
<p>Xcode Resources</p>
<ul>
<li><a href="https://developer.apple.com/library/archive/documentation/ToolsLanguages/Conceptual/Xcode_Overview/ManagingSchemes.html">Xcode Schemes</a></li>
<li><a href="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/debugging_with_xcode/chapters/debugging_tools.html">Xcode Debugging</a></li>
</ul>
</div>
<div id="visual-studio-code-mac-osx-windows" class="section level2">
<h2 class="hasAnchor">
<a href="#visual-studio-code-mac-osx-windows" class="anchor"></a>Visual Studio Code (Mac OSX &amp; Windows)</h2>
<ul>
<li>Install <a href="https://code.visualstudio.com/download">Visual Studio Code</a>, if necessary.</li>
<li>Download and install <em>Boost</em>, following instructions above.</li>
<li>Download the <a href="https://github.com/JGCRI/hector/archive/master.zip">Hector zip file</a> or check out the repository using Git.</li>
<li>Open Hector in the visual studio code IDE, build Hector with Terminal –&gt; Run Build Task or with a <code>make hector</code> call in VSC terminal window.</li>
<li>Run –&gt; Start Debugging or Run Without Debugging or with <code>./src/hector ./inst/input/name-of-ini.ini</code> in the VSC terminal window.</li>
</ul>
</div>
<div id="visual-studio" class="section level2">
<h2 class="hasAnchor">
<a href="#visual-studio" class="anchor"></a>Visual Studio</h2>
<p>VS sln is not supported at this time see <a href="https://github.com/JGCRI/hector/issues/415">VS Hector github issue</a> for more details.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Robert Link, Kalyn Dorheim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
